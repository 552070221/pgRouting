<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Developer’s Guide &mdash; pgRouting Manual (2.0.0-dev)</title>
    
    <link rel="stylesheet" href="../../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.0.0-dev (aac02ca develop)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/theme_extras.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="pgRouting Manual (2.0.0-dev)" href="../../../index.html" />
    <link rel="next" title="Sample Data" href="sampledata.html" />
    <link rel="prev" title="Build Guide" href="../installation/build.html" /> 
  </head>
  <body>
      <div class="header"><img class="rightlogo" src="../../../_static/pgrouting.png" alt="Logo"/><h1 class="heading"><a href="../../../index.html">
          <span>pgRouting Manual (2.0.0-dev)</span></a></h1>
        <h2 class="heading"><span>Developer’s Guide</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="../installation/build.html">Build Guide</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="sampledata.html">Sample Data</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="developer-s-guide">
<span id="developer"></span><h1>Developer&#8217;s Guide<a class="headerlink" href="#developer-s-guide" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All documentation should be in reStructuredText format.
See: &lt;<a class="reference external" href="http://docutils.sf.net/rst.html">http://docutils.sf.net/rst.html</a>&gt; for introductory docs.</p>
</div>
<div class="section" id="source-tree-layout">
<h2>Source Tree Layout<a class="headerlink" href="#source-tree-layout" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>cmake/</dt>
<dd>cmake scripts used as part of our build system.</dd>
<dt>core/</dt>
<dd>This is the algorithm source tree. Each alogorithm should be contained
in its on sub-tree with doc, sql, src, and test sub-directories.
This might get renamed to &#8220;algorithms&#8221; at some point.</dd>
<dt>core/astar/</dt>
<dd>This is an implementation of A* Search based on using Boost Graph
libraries for its implementation. This is a Dijkstra shortest path
implementation with a Euclidean Heuristic.</dd>
<dt>core/common/</dt>
<dd>At the moment this does not have an core in &#8220;src&#8221;, but does have a lot
of SQL wrapper code and topology code in the &#8220;sql&#8221; directory. <em>Algorithm
specific wrappers should get move to the algorithm tree and appropriate
tests should get added to validate the wrappers.</em></dd>
<dt>core/dijkstra/</dt>
<dd>This is an implementation of Dikjstra&#8217;s shortest path solution using
Boost Graph libraries for the implementation.</dd>
<dt>core/driving_distance/</dt>
<dd>This optional package creates driving distance polygons based on
solving a Dijkstra shortest path solution, then creating polygons
based on equal cost distances from the start point.
This optional package requires CGAL libraries to be installed.</dd>
<dt>core/shooting_star/</dt>
<dd><em>DEPRECATED and DOES NOT WORK and IS BEING REMOVED</em>
This is an edge based shortest path algorithm that supports turn
restrictions. It is based on Boost Graph.
Do <em>NOT</em> use this algorithm as it is broken, instead use <em>trsp</em>
which has the same functionality and is faster and give correct results.</dd>
<dt>core/trsp/</dt>
<dd>This is a turn restricted shortest path algorithm. It has some nice
features like you can specify the start and end points as a percentage
along an edge. Restrictions are stored in a separate table from the
graph edges and this make it easier to manage the data.</dd>
<dt>core/tsp/</dt>
<dd>This optional package provides the ability to compute traveling
salesman problem solutions and compute the resulting route.
This optional package requires GAUL libaries to be installed.</dd>
<dt>tools/</dt>
<dd>Miscellaneous scripts and tools.</dd>
<dt>lib/</dt>
<dd>This is the output directory where compiled libraries and installation
targets are staged before installation.</dd>
</dl>
</div>
<div class="section" id="documentation-layout">
<h2>Documentation Layout<a class="headerlink" href="#documentation-layout" title="Permalink to this headline">¶</a></h2>
<p><em>As noted above all documentation should be done using reStructuredText
formated files.</em></p>
<p>Documentation is distributed into the source tree. This top level &#8220;doc&#8221;
directory is intended for high level documentation cover subjects like:</p>
<blockquote>
<div><ul class="simple">
<li>Compiling and testing</li>
<li>Installation</li>
<li>Tutorials</li>
<li>Users&#8217; Guide front materials</li>
<li>Reference Manual front materials</li>
<li>etc</li>
</ul>
</div></blockquote>
<p>Since the algorithm specific documentation is contained in the source
tree with the algorithm specific files, the process of building the
documentation and publishing it will need to assemble the details with
the front material as needed.</p>
<p>Also, to keep the &#8220;doc&#8221; directory from getting cluttered, each major book
like those listed above, should be contained in a separate directory under
&#8220;doc&#8221;. Any images or other materials related to the book should also be kept
in that directory.</p>
</div>
<div class="section" id="testing-infrastructure">
<h2>Testing Infrastructure<a class="headerlink" href="#testing-infrastructure" title="Permalink to this headline">¶</a></h2>
<p>There is a very basic testing infrastructure put in place. Here are the
basics of how it works. We need more test cases. Longer term we should
probably get someone to setup travis-ci or jenkins testing frameworks.</p>
<p>Here is the graph for the TRSP tests.</p>
<img alt="../../../_images/trsp-test-image.png" src="../../../_images/trsp-test-image.png" />
<p>Tests are run via the script at the top level tools/test-runner.pl and it runs
all the test configured tests and at the moment just dumps the results
structure of the test. This can be prettied up later.</p>
<blockquote>
<div>It also assumes that you have installed the libraries as it tests
using the installed postgresql. This probably needs to be made
smarter so we can test out of the build tree. I&#8217;ll need to think
about that.</div></blockquote>
<p>Basically each .../test/ directory should include one <em>test.conf</em> file that
is a perl script fragment that defines what data files to load and what
tests to run. I have built in some mechanisms to allow test and data to
be pg version and postgis version specific, but I&#8217;m not using that yet.
So for example, <em>core/trsp/test/test-any-00.data</em> is a sql plain text dump
that will load and needed data for a set of tests. This is also the graph
in the image above. You can specify multiple files to load, but as a
group they need to have unique names.</p>
<p>core/trsp/test/test-any-00.test is a sql command to be run. It will get
run as:</p>
<div class="highlight-bash"><div class="highlight"><pre>psql ... -A -t -q -f file.test dbname &gt; tmpfile
diff -w file.rest tmpfile
</pre></div>
</div>
<p>Then if there is a difference then an test failure is reported.</p>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="../installation/build.html">Build Guide</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="sampledata.html">Sample Data</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright pgRouting Contributors - Version 2.0.0-dev (aac02ca develop).
      Last updated on Jun 04, 2013.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>