

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pgRouting Node Network &mdash; pgRouting Manual</title>
    
    <link rel="stylesheet" href="../../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.0.0 (d1a47f3 sew-devel-2_0)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/theme_extras.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="pgRouting Manual" href="../../../index.html" />
    <link rel="up" title="Common Functions" href="index.html" />
    <link rel="next" title="pgRouting Custom Types" href="types.html" />
    <link rel="prev" title="pgRouting Topology" href="pgrouting_topology.html" /> 
  </head>
  <body>
      <div class="header"><img class="rightlogo" src="../../../_static/pgrouting.png" alt="Logo"/><h1 class="heading"><a href="../../../index.html">
          <span>pgRouting Manual</span></a></h1>
        <h2 class="heading"><span>pgRouting Node Network</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="pgrouting_topology.html">pgRouting Topology</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../../doc/index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="types.html">pgRouting Custom Types</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="pgrouting-node-network">
<span id="common-node-network"></span><h1>pgRouting Node Network<a class="headerlink" href="#pgrouting-node-network" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Nicolas Ribot</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">$Date: 2013-05-10 20:14:00 -5000 (Fri, 10 May 2013) $</td>
</tr>
<tr class="field-odd field"><th class="field-name">Revision:</th><td class="field-body">$Revision: 0000 $</td>
</tr>
<tr class="field-even field"><th class="field-name">Description:</th><td class="field-body">This function was developed to node a network of edges for use with pgRouting.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Copyright:</th><td class="field-body">Nicolas Ribot, This is released under the MIT-X license.</td>
</tr>
</tbody>
</table>
<div class="section" id="name">
<h2>Name<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">pgr_nodeNetwork</span></tt> - Nodes an network edge table.</p>
</div>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>A common problem associated with bring GIS data into pgRouting is the fact
that the data is often not &#8220;noded&#8221; correctly. This will create invalid
topologies, which will result in routes that are incorrect.</p>
<p>What we mean by &#8220;noded&#8221; is that at every intersection in the road network
all the edges will be broken at the intersection. There are cases like an
over-pass and under-pass intersection where you can not traverse from the
over-pass to the under-pass, but this function does not have the ability to
detect and accomodate those situations.</p>
<p>This function reads the intab table, that has a primary key column n_pkey
and geometry column named n_geom and intersect all the segments in it against
all the other segments can creates a table outtab. It uses the tolerance
for deciding that multiple node within the toerlance are considered the same
node. The outab table has a structure like:</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">noded</span>
<span class="p">(</span>
  <span class="n">id</span> <span class="nb">integer</span><span class="p">,</span>
  <span class="n">sub_id</span> <span class="nb">bigint</span><span class="p">,</span>
  <span class="n">geom</span> <span class="n">geometry</span>
<span class="p">);</span>
</pre></div>
</div>
<p>where id is a reference to the record in intab. sub_id is a seqence number
that identifies all the new segments generated from the original record.</p>
</div>
<div class="section" id="id1">
<h2>Synopsis<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="highlight-sql"><div class="highlight"><pre><span class="nb">text</span> <span class="n">pgr_nodeNetwork</span><span class="p">(</span><span class="n">intab</span> <span class="nb">text</span><span class="p">,</span> <span class="n">n_pkey</span> <span class="nb">text</span><span class="p">,</span> <span class="n">n_geom</span> <span class="nb">text</span><span class="p">,</span>  <span class="n">outtab</span> <span class="nb">text</span><span class="p">,</span> <span class="n">tol</span> <span class="n">double</span> <span class="k">precision</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">intab:</th><td class="field-body"><tt class="docutils literal"><span class="pre">text</span></tt> name of the input table to be noded</td>
</tr>
<tr class="field-even field"><th class="field-name">n_pkey:</th><td class="field-body"><tt class="docutils literal"><span class="pre">text</span></tt> name of the primary key column for the table</td>
</tr>
<tr class="field-odd field"><th class="field-name">n_geom:</th><td class="field-body"><tt class="docutils literal"><span class="pre">text</span></tt> name of the geometry column that should be noded</td>
</tr>
<tr class="field-even field"><th class="field-name">outtab:</th><td class="field-body"><tt class="docutils literal"><span class="pre">text</span></tt> name of the output table that will be created</td>
</tr>
<tr class="field-odd field"><th class="field-name">tol:</th><td class="field-body"><tt class="docutils literal"><span class="pre">float8</span></tt> tolerance for coinicident points</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">pgr_nodeNetwork</span><span class="p">(</span><span class="s1">&#39;myedges&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;the_geom&#39;</span><span class="p">,</span> <span class="s1">&#39;nodededges&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000001</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="pgrouting_topology.html">pgRouting Topology</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../../doc/index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="types.html">pgRouting Custom Types</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright pgRouting Contributors.
      Last updated on May 14, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>