BEGIN;
BEGIN
SET client_min_messages TO NOTICE;
SET
CREATE TABLE s_test(geom geometry);
CREATE TABLE
INSERT INTO s_test(geom) VALUES(ST_GeomFromText('MULTIPOINT(
(120 -224), (185 -219), (190 -234), (200 -246), (212 -256), (227 -261),
(242 -264), (257 -265), (272 -264), (287 -263),(302 -258), (315 -250),
(323 -237), (321 -222), (308 -213), (293 -208), (278 -205), (263 -202),
(248 -199), (233 -196), (218 -193), (203 -190), (188 -185), (173 -180),
(160 -172), (148 -162), (138 -150), (133 -135), (132 -120), (136 -105),
(146  -92), (158  -82), (171  -74), (186  -69), (201  -65), (216  -62),
(231  -60), (246  -60), (261  -60), (276  -60), (291  -61), (306  -64),
(321  -67), (336  -72), (349  -80), (362  -89), (372 -101), (379 -115),
(382 -130), (314 -134), (309 -119), (298 -108), (284 -102), (269 -100),
(254  -99), (239 -100), (224 -102), (209 -107), (197 -117), (200 -132),
(213 -140), (228 -145), (243 -148), (258 -151), (273 -154), (288 -156),
(303 -159), (318 -163), (333 -167), (347 -173), (361 -179), (373 -189),
(383 -201), (389 -215), (391 -230), (390 -245), (384 -259), (374 -271),
(363 -282), (349 -289), (335 -295), (320 -299), (305 -302), (290 -304),
(275 -305), (259 -305), (243 -305), (228 -304), (213 -302), (198 -300),
(183 -295), (169 -289), (155 -282), (143 -272), (133 -260), (126 -246),
(136 -223), (152 -222), (168 -221), (365 -131), (348 -132), (331 -133),
(251 -177), (183 -157), (342  -98), (247  -75), (274 -174), (360 -223),
(192  -85), (330 -273), (210 -283), (326  -97), (177 -103), (315 -188),
(175 -139), (366 -250), (321 -204), (344 -232), (331 -113), (162 -129),
(272  -77), (292 -192), (144 -244), (196 -272), (212  -89), (166 -236),
(238 -167), (289 -282), (333 -187), (341 -249), (164 -113), (238 -283),
(344 -265), (176 -248), (312 -273), (299  -85), (154 -261), (265 -287),
(359 -111), (160 -150), (212 -169), (351 -199), (160  -98), (228  -77),
(376 -224), (148 -120), (174 -272), (194 -100), (292 -173), (341 -212),
(369 -209), (189 -258), (198 -159), (275 -190), (322  -82))') ) ;
INSERT 0 1
SELECT seq, ST_AsText(geom), ST_isValid(geom), ST_NPoints(geom)
FROM pgr_alphaShape1((SELECT array_agg(geom) FROM s_test), 14.8123623);
 seq |                                                                                                                                                                                                                                                                         st_astext                                                                                                                                                                                                                                                                          | st_isvalid | st_npoints
-----+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------+------------
   1 | POLYGON((186 -69,201 -65,216 -62,231 -60,246 -60,261 -60,276 -60,291 -61,272 -77,247 -75,254 -99,239 -100,224 -102,209 -107,197 -117,177 -103,192 -85,171 -74,186 -69))                                                                                                                                                                                                                                                                                                                                                                                    | t          |         19
   2 | POLYGON((365 -131,348 -132,331 -133,314 -134,309 -119,326 -97,322 -82,299 -85,291 -61,306 -64,321 -67,336 -72,349 -80,362 -89,372 -101,379 -115,382 -130,365 -131),(359 -111,348 -132,331 -113,359 -111))                                                                                                                                                                                                                                                                                                                                                  | t          |         22
   3 | POLYGON((347 -173,361 -179,373 -189,383 -201,389 -215,391 -230,390 -245,376 -224,366 -250,344 -265,363 -282,349 -289,335 -295,320 -299,312 -273,289 -282,305 -302,290 -304,275 -305,259 -305,265 -287,257 -265,272 -264,287 -263,302 -258,315 -250,323 -237,321 -222,308 -213,293 -208,278 -205,263 -202,248 -199,233 -196,238 -167,228 -145,243 -148,258 -151,273 -154,288 -156,303 -159,292 -173,315 -188,318 -163,333 -167,347 -173),(251 -177,258 -151,274 -174,251 -177),(360 -223,366 -250,344 -232,360 -223),(341 -249,330 -273,315 -250,341 -249)) | t          |         58
   4 | POLYGON((254 -99,272 -77,284 -102,269 -100,254 -99))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | t          |          5
   5 | POLYGON((299 -85,298 -108,284 -102,299 -85))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | t          |          4
   6 | POLYGON((238 -283,243 -305,228 -304,238 -283))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | t          |          4
   7 | POLYGON((210 -283,228 -304,213 -302,198 -300,183 -295,169 -289,155 -282,143 -272,133 -260,126 -246,120 -224,136 -223,152 -222,168 -221,185 -219,190 -234,200 -246,212 -256,227 -261,210 -283))                                                                                                                                                                                                                                                                                                                                                             | t          |         20
   8 | POLYGON((138 -150,160 -150,162 -129,175 -139,183 -157,198 -159,188 -185,173 -180,160 -172,148 -162,138 -150))                                                                                                                                                                                                                                                                                                                                                                                                                                              | t          |         11
   9 | POLYGON((132 -120,136 -105,146 -92,158 -82,171 -74,160 -98,177 -103,164 -113,162 -129,148 -120,133 -135,132 -120))                                                                                                                                                                                                                                                                                                                                                                                                                                         | t          |         12
  10 | POLYGON((200 -132,213 -140,212 -169,198 -159,200 -132))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | t          |          5
  11 | POLYGON((238 -283,227 -261,242 -264,257 -265,238 -283))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | t          |          5
  12 | POLYGON((366 -250,390 -245,384 -259,374 -271,366 -250))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | t          |          5
  13 | POLYGON((188 -185,212 -169,218 -193,203 -190,188 -185))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | t          |          5
(13 rows)

SELECT seq, ST_AsText(geom), ST_isValid(geom), ST_NPoints(geom)
FROM pgr_alphaShape1((SELECT array_agg(geom) FROM s_test), 14.8123624);
 seq |                                                                                                                                                                                                                                                                         st_astext                                                                                                                                                                                                                                                                          | st_isvalid | st_npoints
-----+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------+------------
   1 | POLYGON((146 -92,158 -82,171 -74,160 -98,177 -103,164 -113,162 -129,148 -120,133 -135,132 -120,136 -105,146 -92))                                                                                                                                                                                                                                                                                                                                                                                                                                          | t          |         12
   2 | POLYGON((372 -101,379 -115,382 -130,365 -131,348 -132,331 -133,314 -134,309 -119,326 -97,322 -82,299 -85,291 -61,306 -64,321 -67,336 -72,349 -80,362 -89,372 -101),(359 -111,348 -132,331 -113,359 -111))                                                                                                                                                                                                                                                                                                                                                  | t          |         22
   3 | POLYGON((200 -246,212 -256,227 -261,210 -283,228 -304,213 -302,198 -300,183 -295,169 -289,155 -282,143 -272,133 -260,126 -246,120 -224,136 -223,152 -222,168 -221,185 -219,190 -234,200 -246))                                                                                                                                                                                                                                                                                                                                                             | t          |         20
   4 | POLYGON((160 -172,148 -162,138 -150,160 -150,162 -129,175 -139,183 -157,198 -159,188 -185,173 -180,160 -172))                                                                                                                                                                                                                                                                                                                                                                                                                                              | t          |         11
   5 | POLYGON((200 -132,213 -140,212 -169,198 -159,200 -132))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | t          |          5
   6 | POLYGON((228 -145,243 -148,258 -151,273 -154,288 -156,303 -159,292 -173,315 -188,318 -163,333 -167,347 -173,361 -179,373 -189,383 -201,389 -215,391 -230,390 -245,376 -224,366 -250,344 -265,363 -282,349 -289,335 -295,320 -299,312 -273,289 -282,305 -302,290 -304,275 -305,259 -305,265 -287,257 -265,272 -264,287 -263,302 -258,315 -250,323 -237,321 -222,308 -213,293 -208,278 -205,263 -202,248 -199,233 -196,238 -167,228 -145),(258 -151,274 -174,251 -177,258 -151),(341 -249,330 -273,315 -250,341 -249),(360 -223,366 -250,344 -232,360 -223)) | t          |         58
   7 | POLYGON((188 -185,212 -169,218 -193,203 -190,188 -185))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | t          |          5
   8 | POLYGON((171 -74,186 -69,201 -65,216 -62,231 -60,246 -60,261 -60,276 -60,291 -61,272 -77,247 -75,254 -99,239 -100,224 -102,209 -107,197 -117,177 -103,192 -85,171 -74))                                                                                                                                                                                                                                                                                                                                                                                    | t          |         19
   9 | POLYGON((238 -283,243 -305,228 -304,238 -283))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | t          |          4
  10 | POLYGON((384 -259,374 -271,366 -250,390 -245,384 -259))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | t          |          5
  11 | POLYGON((238 -283,227 -261,242 -264,257 -265,238 -283))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | t          |          5
  12 | POLYGON((303 -159,314 -134,318 -163,303 -159))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | t          |          4
  13 | POLYGON((254 -99,272 -77,284 -102,269 -100,254 -99))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | t          |          5
  14 | POLYGON((299 -85,298 -108,284 -102,299 -85))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | t          |          4
(14 rows)

ROLLBACK;
ROLLBACK
