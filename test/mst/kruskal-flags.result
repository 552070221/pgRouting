BEGIN;
BEGIN
SET client_min_messages TO NOTICE;
SET
UPDATE edge_table SET cost = cost + 0.001 * id * id, reverse_cost = reverse_cost + 0.001 * id * id;
UPDATE 18
SELECT * FROM pgr_kruskal(
    'SELECT id, source, target, cost, reverse_cost FROM edge_table ORDER BY id',
    get_component := false
);
 seq | root | depth | node | edge | cost  | agg_cost
-----+------+-------+------+------+-------+----------
   1 |    0 |     0 |    2 |    1 | 1.001 |        0
   2 |    0 |     0 |    2 |    2 | 1.004 |        0
   3 |    0 |     0 |    3 |    3 | 1.009 |        0
   4 |    0 |     0 |   11 |   11 | 1.121 |        0
   5 |    0 |     0 |    5 |    4 | 1.016 |        0
   6 |    0 |     0 |   10 |   10 |   1.1 |        0
   7 |    0 |     0 |    6 |    5 | 1.025 |        0
   8 |    0 |     0 |    8 |    6 | 1.036 |        0
   9 |    0 |     0 |    5 |    7 | 1.049 |        0
  10 |    0 |     0 |    9 |    9 | 1.081 |        0
  11 |    0 |     0 |   12 |   13 | 1.169 |        0
  12 |    0 |     0 |   17 |   18 | 1.324 |        0
  13 |    0 |     0 |   13 |   14 | 1.196 |        0
  14 |    0 |     0 |   15 |   17 | 1.289 |        0
(14 rows)

SELECT * FROM pgr_kruskal(
    'SELECT id, source, target, cost, reverse_cost FROM edge_table ORDER BY id',
    get_component := false
);
 seq | root | depth | node | edge | cost  | agg_cost
-----+------+-------+------+------+-------+----------
   1 |    0 |     0 |    2 |    1 | 1.001 |        0
   2 |    0 |     0 |    2 |    2 | 1.004 |        0
   3 |    0 |     0 |    3 |    3 | 1.009 |        0
   4 |    0 |     0 |   11 |   11 | 1.121 |        0
   5 |    0 |     0 |    5 |    4 | 1.016 |        0
   6 |    0 |     0 |   10 |   10 |   1.1 |        0
   7 |    0 |     0 |    6 |    5 | 1.025 |        0
   8 |    0 |     0 |    8 |    6 | 1.036 |        0
   9 |    0 |     0 |    5 |    7 | 1.049 |        0
  10 |    0 |     0 |    9 |    9 | 1.081 |        0
  11 |    0 |     0 |   12 |   13 | 1.169 |        0
  12 |    0 |     0 |   17 |   18 | 1.324 |        0
  13 |    0 |     0 |   13 |   14 | 1.196 |        0
  14 |    0 |     0 |   15 |   17 | 1.289 |        0
(14 rows)

SELECT * FROM pgr_kruskal(
    'SELECT id, source, target, cost, reverse_cost FROM edge_table ORDER BY id',
    get_component := true
);
 seq | root | depth | node | edge | cost  | agg_cost
-----+------+-------+------+------+-------+----------
   1 |    1 |     0 |    2 |    1 | 1.001 |        0
   2 |    1 |     0 |    2 |    2 | 1.004 |        0
   3 |    1 |     0 |    3 |    3 | 1.009 |        0
   4 |    1 |     0 |   11 |   11 | 1.121 |        0
   5 |    1 |     0 |    5 |    4 | 1.016 |        0
   6 |    1 |     0 |   10 |   10 |   1.1 |        0
   7 |    1 |     0 |    6 |    5 | 1.025 |        0
   8 |    1 |     0 |    8 |    6 | 1.036 |        0
   9 |    1 |     0 |    5 |    7 | 1.049 |        0
  10 |    1 |     0 |    9 |    9 | 1.081 |        0
  11 |    1 |     0 |   12 |   13 | 1.169 |        0
  12 |   16 |     0 |   17 |   18 | 1.324 |        0
  13 |    1 |     0 |   13 |   14 | 1.196 |        0
  14 |   14 |     0 |   15 |   17 | 1.289 |        0
(14 rows)

SELECT * FROM pgr_kruskal(
    'SELECT id, source, target, cost, reverse_cost FROM edge_table ORDER BY id',
    order_by := 1
);
 seq | root | depth | node | edge | cost  | agg_cost
-----+------+-------+------+------+-------+----------
   1 |    0 |     0 |    1 |   -1 |     0 |        0
   2 |    0 |     1 |    2 |    1 | 1.001 |    1.001
   3 |    0 |     2 |    3 |    2 | 1.004 |    2.005
   4 |    0 |     3 |    4 |    3 | 1.009 |    3.014
   5 |    0 |     3 |    6 |    5 | 1.025 |     3.03
   6 |    0 |     4 |    9 |    9 | 1.081 |    4.111
   7 |    0 |     4 |   11 |   11 | 1.121 |    4.151
   8 |    0 |     5 |   12 |   13 | 1.169 |     5.32
   9 |    0 |     2 |    5 |    4 | 1.016 |    2.017
  10 |    0 |     3 |    8 |    7 | 1.049 |    3.066
  11 |    0 |     4 |    7 |    6 | 1.036 |    4.102
  12 |    0 |     3 |   10 |   10 |   1.1 |    3.117
  13 |    0 |     4 |   13 |   14 | 1.196 |    4.313
  14 |    0 |     0 |   14 |   -1 |     0 |        0
  15 |    0 |     1 |   15 |   17 | 1.289 |    1.289
  16 |    0 |     0 |   16 |   -1 |     0 |        0
  17 |    0 |     1 |   17 |   18 | 1.324 |    1.324
(17 rows)

SELECT * FROM pgr_kruskal(
    'SELECT id, source, target, cost, reverse_cost FROM edge_table ORDER BY id',
    order_by := 1,
    get_component := true
);
 seq | root | depth | node | edge | cost  | agg_cost
-----+------+-------+------+------+-------+----------
   1 |    1 |     0 |    1 |   -1 |     0 |        0
   2 |    1 |     1 |    2 |    1 | 1.001 |    1.001
   3 |    1 |     2 |    3 |    2 | 1.004 |    2.005
   4 |    1 |     3 |    4 |    3 | 1.009 |    3.014
   5 |    1 |     3 |    6 |    5 | 1.025 |     3.03
   6 |    1 |     4 |    9 |    9 | 1.081 |    4.111
   7 |    1 |     4 |   11 |   11 | 1.121 |    4.151
   8 |    1 |     5 |   12 |   13 | 1.169 |     5.32
   9 |    1 |     2 |    5 |    4 | 1.016 |    2.017
  10 |    1 |     3 |    8 |    7 | 1.049 |    3.066
  11 |    1 |     4 |    7 |    6 | 1.036 |    4.102
  12 |    1 |     3 |   10 |   10 |   1.1 |    3.117
  13 |    1 |     4 |   13 |   14 | 1.196 |    4.313
  14 |   14 |     0 |   14 |   -1 |     0 |        0
  15 |   14 |     1 |   15 |   17 | 1.289 |    1.289
  16 |   16 |     0 |   16 |   -1 |     0 |        0
  17 |   16 |     1 |   17 |   18 | 1.324 |    1.324
(17 rows)

SELECT * FROM pgr_kruskal(
    'SELECT id, source, target, cost, reverse_cost FROM edge_table ORDER BY id',
    order_by := 2,
    get_component := true
);
 seq | root | depth | node | edge | cost  | agg_cost
-----+------+-------+------+------+-------+----------
   1 |    1 |     0 |    1 |   -1 |     0 |        0
   2 |    1 |     1 |    2 |    1 | 1.001 |    1.001
   3 |    1 |     2 |    3 |    2 | 1.004 |    2.005
   4 |    1 |     2 |    5 |    4 | 1.016 |    2.017
   5 |    1 |     3 |    4 |    3 | 1.009 |    3.014
   6 |    1 |     3 |    6 |    5 | 1.025 |     3.03
   7 |    1 |     3 |    8 |    7 | 1.049 |    3.066
   8 |    1 |     3 |   10 |   10 |   1.1 |    3.117
   9 |    1 |     4 |    9 |    9 | 1.081 |    4.111
  10 |    1 |     4 |   11 |   11 | 1.121 |    4.151
  11 |    1 |     4 |    7 |    6 | 1.036 |    4.102
  12 |    1 |     4 |   13 |   14 | 1.196 |    4.313
  13 |    1 |     5 |   12 |   13 | 1.169 |     5.32
  14 |   14 |     0 |   14 |   -1 |     0 |        0
  15 |   14 |     1 |   15 |   17 | 1.289 |    1.289
  16 |   16 |     0 |   16 |   -1 |     0 |        0
  17 |   16 |     1 |   17 |   18 | 1.324 |    1.324
(17 rows)

SELECT * FROM pgr_kruskal(
    'SELECT id, source, target, cost, reverse_cost FROM edge_table ORDER BY id',
    order_by := 2,
    get_component := true
);
 seq | root | depth | node | edge | cost  | agg_cost
-----+------+-------+------+------+-------+----------
   1 |    1 |     0 |    1 |   -1 |     0 |        0
   2 |    1 |     1 |    2 |    1 | 1.001 |    1.001
   3 |    1 |     2 |    3 |    2 | 1.004 |    2.005
   4 |    1 |     2 |    5 |    4 | 1.016 |    2.017
   5 |    1 |     3 |    4 |    3 | 1.009 |    3.014
   6 |    1 |     3 |    6 |    5 | 1.025 |     3.03
   7 |    1 |     3 |    8 |    7 | 1.049 |    3.066
   8 |    1 |     3 |   10 |   10 |   1.1 |    3.117
   9 |    1 |     4 |    9 |    9 | 1.081 |    4.111
  10 |    1 |     4 |   11 |   11 | 1.121 |    4.151
  11 |    1 |     4 |    7 |    6 | 1.036 |    4.102
  12 |    1 |     4 |   13 |   14 | 1.196 |    4.313
  13 |    1 |     5 |   12 |   13 | 1.169 |     5.32
  14 |   14 |     0 |   14 |   -1 |     0 |        0
  15 |   14 |     1 |   15 |   17 | 1.289 |    1.289
  16 |   16 |     0 |   16 |   -1 |     0 |        0
  17 |   16 |     1 |   17 |   18 | 1.324 |    1.324
(17 rows)

SELECT * FROM pgr_kruskal(
    'SELECT id, source, target, cost, reverse_cost FROM edge_table ORDER BY id',
    order_by := 2,
    get_component := true
);
 seq | root | depth | node | edge | cost  | agg_cost
-----+------+-------+------+------+-------+----------
   1 |    1 |     0 |    1 |   -1 |     0 |        0
   2 |    1 |     1 |    2 |    1 | 1.001 |    1.001
   3 |    1 |     2 |    3 |    2 | 1.004 |    2.005
   4 |    1 |     2 |    5 |    4 | 1.016 |    2.017
   5 |    1 |     3 |    4 |    3 | 1.009 |    3.014
   6 |    1 |     3 |    6 |    5 | 1.025 |     3.03
   7 |    1 |     3 |    8 |    7 | 1.049 |    3.066
   8 |    1 |     3 |   10 |   10 |   1.1 |    3.117
   9 |    1 |     4 |    9 |    9 | 1.081 |    4.111
  10 |    1 |     4 |   11 |   11 | 1.121 |    4.151
  11 |    1 |     4 |    7 |    6 | 1.036 |    4.102
  12 |    1 |     4 |   13 |   14 | 1.196 |    4.313
  13 |    1 |     5 |   12 |   13 | 1.169 |     5.32
  14 |   14 |     0 |   14 |   -1 |     0 |        0
  15 |   14 |     1 |   15 |   17 | 1.289 |    1.289
  16 |   16 |     0 |   16 |   -1 |     0 |        0
  17 |   16 |     1 |   17 |   18 | 1.324 |    1.324
(17 rows)

ROLLBACK;
ROLLBACK
