

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Prise en main &mdash; pgRouting Manual (2.0.0)</title>
    
    <link rel="stylesheet" href="../../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.0.0 (0a53b89 master)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script type="text/javascript" src="../../../_static/theme_extras.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="pgRouting Manual (2.0.0)" href="../../../index.html" />
    <link rel="up" title="Tutoriel" href="index.html" />
    <link rel="next" title="Topologie de routage" href="topology.html" />
    <link rel="prev" title="Tutoriel" href="index.html" /> 
  </head>
  <body>
      <div class="header"><img class="rightlogo" src="../../../_static/pgrouting.png" alt="Logo"/><h1 class="heading"><a href="../../../index.html">
          <span>pgRouting Manual (2.0.0)</span></a></h1>
        <h2 class="heading"><span>Prise en main</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="index.html">Tutoriel</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contenu</a>
        &#160;&#160;::&#160;&#160;
        <a href="topology.html">Topologie de routage</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="getting-started">
<span id="tutorial"></span><h1>Prise en main<a class="headerlink" href="#getting-started" title="Lien permanent vers ce titre">¶</a></h1>
<p>Ceci est un guide simplifié pour vous guider pas à pas à démarrer avec pgRouting. Dans ce guide nous détaillerons :</p>
<blockquote>
<div><ul class="simple">
<li>Comment créer une base de données pour notre projet</li>
<li>Comment charger des données</li>
<li>Comment construire une topologie</li>
<li>Comment vérifier les erreurs de votre graphe</li>
<li>Comment calculer une route</li>
<li>Comment utiliser d&#8217;autres outils pour votre graphe et votre route</li>
<li>Comment créer une application web</li>
</ul>
</div></blockquote>
<div class="section" id="how-to-create-a-database-to-use-for-our-project">
<h2>Comment créer une base de données pour notre projet<a class="headerlink" href="#how-to-create-a-database-to-use-for-our-project" title="Lien permanent vers ce titre">¶</a></h2>
<p>La première chose que nous avons besoin de faire est de créer une base de données et charger pgrouting dans la base de données. Typiquement vous allez créer une base de données pour chaque projet. Une fois que vous avez une base de données sur laquelle travailler, vous pouvez charger vos données et construire votre application à partir de cette base de données. Cela facilite les choses si vous voulez plus tard migrer le projet sur un serveur de production.</p>
<p>Pour Postgresql 9.1 et les versions ultérieures</p>
<div class="highlight-bash"><div class="highlight"><pre>createdb mydatabase
psql mydatabase -c <span class="s2">&quot;create extension postgis&quot;</span>
psql mydatabase -c <span class="s2">&quot;create extension pgrouting&quot;</span>
</pre></div>
</div>
<p>Pour les versions précédentes de postgresql</p>
<div class="highlight-bash"><div class="highlight"><pre>createdb -T template1 template_postgis
psql template_postgis -c <span class="s2">&quot;create language plpgsql&quot;</span>
psql template_postgis -f /usr/share/postgresql/9.0/contrib/postgis-1.5/postgis.sql
psql template_postgis -f /usr/share/postgresql/9.0/contrib/postgis-1.5/spatial_ref_sys.sql
psql template_postgis -f /usr/share/postgresql/9.0/contrib/postgis_comments.sql

createdb -T template_postgis template_pgrouting
psql template_pgrouting -f /usr/share/postgresql/9.0/contrib/pgrouting-2.0/pgrouting.sql

createdb -T template_pgrouting mydatabase
</pre></div>
</div>
</div>
<div class="section" id="how-to-load-some-data">
<h2>Comment charger des données<a class="headerlink" href="#how-to-load-some-data" title="Lien permanent vers ce titre">¶</a></h2>
<p>La façon dont vous chargez vos données dépend du format des données. Il existe des outils OpenSource variés qui peuvent vous aider, comme :</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">shp2pgsql:</th><td class="field-body"><ul class="first simple">
<li>c&#8217;est le chargeur de fichier au format postgresql</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">ogr2ogr:</th><td class="field-body"><ul class="first simple">
<li>c&#8217;est un utilitaire de conversion de données vectorielles</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">osm2pgsql:</th><td class="field-body"><ul class="first last simple">
<li>c&#8217;est un outil de chargement des données OSM dans postgresql</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Ces outils et probablement d&#8217;autres vont donc vous permettre de lire des données vectorielles et peuvent charger ces données dans votre base de données comme une table d&#8217;un certain type. A ce point vous avez besoin de connaître un peu votre structure de données et son contenu. Un moyen facile d&#8217;explorer vos tables de données est d&#8217;utiliser pgAdmin3 ou phpPgAdmin.</p>
</div>
<div class="section" id="how-to-build-a-topology">
<h2>Comment construire une topologie<a class="headerlink" href="#how-to-build-a-topology" title="Lien permanent vers ce titre">¶</a></h2>
<p>Ensuite nous avons besoin de construire une topologie de nos données routières. Cela signifie que pour toute arête dans vos données routieres, les terminaisons de cette arête vont être connectées en un unique noeud et aux autres arêtes qui sont aussi connectées à ce meme noeud. Une fois que les arêtes sont connectées aux noeuds nous avons un graphe qui peut etre utilisé pour le routage avec pgrouting. Nous proposons un outil qui aide pour cela :</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">select</span> <span class="n">pgr_createTopology</span><span class="p">(</span><span class="s1">&#39;myroads&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000001</span><span class="p">);</span>
</pre></div>
</div>
<p>Voir <a class="reference internal" href="../../../src/common/doc/functions/create_topology.html#pgr-create-topology"><em>pgr_createTopology</em></a> pour plus d&#8217;informations.</p>
</div>
<div class="section" id="how-to-check-your-graph-for-errors">
<h2>Comment vérifier les erreurs de votre graphe<a class="headerlink" href="#how-to-check-your-graph-for-errors" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il y a beaucoup de sources d’erreurs possibles dans un graphe. Les données avec lesquelles vous avez commencé peuvent ne pas avoir été conçues avec l’idée de routage. Un graphe a des conditions très spécifiques. L’une est qu’il est <em>NODED</em>, cela signifie que mis à part des cas d’utilisation très spécifiques, chaque segment de route commence et finit comme un nœud et en général ne croise pas d’autre segment de route avec lequel il devrait être connecté.</p>
<p>Il peut y avoir d&#8217;autres erreurs comme la direction d&#8217;une route à sens unique étant entrée dans la mauvaise direction. Nous n&#8217;avons pas les outils pour chercher toutes les erreurs possibles mais nous avons les outils qui peuvent aider.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">select</span> <span class="n">pgr_analyzegraph</span><span class="p">(</span><span class="s1">&#39;myroads&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000001</span><span class="p">);</span>
<span class="k">select</span> <span class="n">pgr_analyzeoneway</span><span class="p">(</span><span class="s1">&#39;myroads&#39;</span><span class="p">,</span>  <span class="n">s_in_rules</span><span class="p">,</span> <span class="n">s_out_rules</span><span class="p">,</span>
                                     <span class="n">t_in_rules</span><span class="p">,</span> <span class="n">t_out_rules</span>
                                     <span class="n">direction</span><span class="p">)</span>
</pre></div>
</div>
<p>Voir <a class="reference internal" href="analytics.html#analytics"><em>Analytiques de graphe</em></a> pour plus d&#8217;informations.</p>
<p>Si vos données ont besoin d&#8217;être <em>NODED</em>, nous avons un outil qui peut aider pour cela aussi.</p>
<p>Voir <a class="reference internal" href="../../../src/common/doc/functions/node_network.html#pgr-node-network"><em>pgr_nodeNetwork</em></a> pour plus d&#8217;informations.</p>
</div>
<div class="section" id="how-to-compute-a-route">
<h2>Comment calculer une route<a class="headerlink" href="#how-to-compute-a-route" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une fois que vous avez tout le travail préparatoire de-dessus fini, calculer une route est assez facile. Nous avons beaucoup d&#8217;algorithmes différents mais ils peuvent fonctionner avec votre réseau de routes préparé. La forme générale d&#8217;une route est :</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">select</span> <span class="n">pgr_</span><span class="o">&lt;</span><span class="n">algorithm</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="k">SQL</span> <span class="k">for</span> <span class="n">edges</span><span class="o">&gt;</span><span class="p">,</span> <span class="k">start</span><span class="p">,</span> <span class="k">end</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">additonal</span> <span class="k">options</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>As you can see this is fairly straight forward and you can look and the
specific algorithms for the details on how to use them. What you get as a
result from these queries will be a set of record of type <a class="reference internal" href="../../../src/common/doc/types/cost_result.html#type-cost-result"><em>pgr_costResult[]</em></a>
or <a class="reference internal" href="../../../src/common/doc/types/geom_result.html#type-geom-result"><em>pgr_geomResult[]</em></a>. These results have information like edge id and/or the
node id along with the cost or geometry for the step in the path from <em>start</em>
to <em>end</em>. Using the ids you can join these result back to your edge table
to get more information about each step in the path.</p>
<blockquote>
<div><ul class="simple">
<li>Voir aussi <a class="reference internal" href="../../../src/common/doc/types/cost_result.html#type-cost-result"><em>pgr_costResult[]</em></a> et <a class="reference internal" href="../../../src/common/doc/types/geom_result.html#type-geom-result"><em>pgr_geomResult[]</em></a>.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="how-to-use-other-tools-to-view-your-graph-and-route">
<h2>Comment utiliser d&#8217;autres outils pour votre graphe et votre route<a class="headerlink" href="#how-to-use-other-tools-to-view-your-graph-and-route" title="Lien permanent vers ce titre">¶</a></h2>
<p>À déterminer</p>
</div>
<div class="section" id="how-to-create-a-web-app">
<h2>Comment créer une application web<a class="headerlink" href="#how-to-create-a-web-app" title="Lien permanent vers ce titre">¶</a></h2>
<p>À déterminer</p>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="index.html">Tutoriel</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contenu</a>
        &#160;&#160;::&#160;&#160;
        <a href="topology.html">Topologie de routage</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright pgRouting Contributors - Version 2.0.0 (0a53b89 master).
      Mis à jour le Sep 24, 2013.
      Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>